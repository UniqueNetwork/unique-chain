name: schedule-trigger-for-develop-build
on:
  # update the branch ci/develop-scheduler every night
  schedule:
    - cron: '0 1 * * *'
  # or update the branch manually
  workflow_dispatch:

jobs:
  update:
    runs-on: medium
    steps:
      - name: Clean Workspace
        uses: AutoModality/action-clean@latest
      - name: Checkout ðŸ›Ž
        uses: actions/checkout@latest
        with:
          # check out all branches
          fetch-depth: 0
          token: ${{ secrets.GH_PAT }}
      - name: Update Git branch ci/develop-scheduler
        run: |
          git config user.name "Unique"
          git config user.email github-actions@github.com
          git checkout ci/develop-scheduler
          git merge develop --no-edit -m "Merged develop branch on $(date +%F)"
      - name: Push the updated branch X
        run: |
          git push origin ci/develop-scheduler
      - name: Clean Workspace
        if: always()
        uses: AutoModality/action-clean@latest

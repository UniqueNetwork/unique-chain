name: Nesting Forkless

on:
  workflow_call:
    inputs:
      network:
        description: 'Chain Network'
#        default: 'opal'				#If a default parameter is not set, the default value of the input is false for a boolean, 0 for a number, and "" for a string.
        required: true
        type: string					# This must be one of: boolean, number, or string.
      runtime:
        required: true 
        type: string
      features:
        required: true
        type: string
      mainnet_branch:
        required: true
        type: string
      replica_from_address:
        required: true
        type: string

 

jobs:
    
  forkless-update-data:
#    name: ${{ matrix.network }}
#    strategy:
#      matrix:
#        include: ${{fromJson(needs.prepare-execution-marix.outputs.matrix)}}
#    needs: prepare-execution-marix
#    if: contains( github.event.pull_request.labels.*.name, 'forkless')
    uses: ./.github/workflows/forkless-update-data_v2.yml
    with:
      network: ${{ inputs.network }}
      runtime: ${{ inputs.runtime }}
      features: ${{ inputs.features }}
      mainnet_branch: ${{ inputs.mainnet_branch }}
      replica_from_address: ${{ inputs.replica_from_address }}


  forkless-update-no-data:
#    name: ${{ matrix.network }}
#    strategy:
#      matrix:
#        include: ${{fromJson(needs.prepare-execution-marix.outputs.matrix)}}
#    needs: prepare-execution-marix
#    if: contains( github.event.pull_request.labels.*.name, 'forkless')
    uses: ./.github/workflows/forkless-update-nodata_v2.yml
    with:
      network: ${{ inputs.network }}
      runtime: ${{ inputs.runtime }}
      features: ${{ inputs.features }}
      mainnet_branch: ${{ inputs.mainnet_branch }}

  try-runtime:
#    name: ${{ matrix.network }}
#    strategy:
#      matrix:
#        include: ${{fromJson(needs.prepare-execution-marix.outputs.matrix)}}
#    needs: prepare-execution-marix
#    if: contains( github.event.pull_request.labels.*.name, 'forkless')
    uses: ./.github/workflows/try-runtime_v2.yml
    with:
      network: ${{ inputs.network }}
      features: ${{ inputs.features }}
      replica_from_address: ${{ inputs.replica_from_address }}



